apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: tk2
spec:
  entryPoints:
    - web
  routes:
    - match: Host(`tk2.jtthink.com`) && Path(`/abc`)
      kind: Rule
      middlewares:
        - name: ngx-stripprefix
        - name: ngx-ratelimit
      services:
        - name: myngx
          port: 80
---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: ngx-stripprefix
spec:
  stripPrefix:
    prefixes:
      - /abc
---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: ngx-ratelimit
spec:
  rateLimit:
    average: 1
    burst: 5

